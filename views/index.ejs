<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <link rel="icon" type="image/x-icon" href="./images/icon-head.png">
    <title>Task Manager App</title>

    <style>
        .task-card {
            background: rgba(24, 24, 27, 0.55);
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            border: 1px solid rgba(255,255,255,0.06);
            transition: all 0.25s ease;
        }

        .task-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 18px 35px rgba(0,0,0,0.35);
            border: 1px solid rgba(255,255,255,0.12);
        }

        #toast {
            transition: all 0.4s ease;
        }
    </style>
</head>

<body class="bg-gradient-to-br from-zinc-950 via-zinc-900 to-zinc-950 text-zinc-100 font-sans antialiased">

    <%- include('toast') %>

    <div class="max-w-6xl mx-auto px-6 py-12">

        <header class="mb-12 text-center">
            <h1 class="text-5xl font-extrabold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent">
                Task Manager
            </h1>
            <p class="text-amber-600 mt-2">Organize your workflow and stay productive.</p>
        </header>

        <div class="bg-zinc-900/50 backdrop-blur-lg border border-zinc-800 p-8 rounded-xl shadow-2xl mb-12">
            <form action="/create" method="post" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-zinc-400 mb-2">Task Title</label>
                    <input class="block w-full rounded-lg outline-none px-4 py-3 bg-zinc-800 border border-zinc-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 text-white"
                        type="text" placeholder="What needs to be done?" name="title" required>
                </div>

                <div>
                    <label class="block text-sm font-medium text-zinc-400 mb-2">Details</label>
                    <textarea class="block w-full rounded-lg outline-none px-4 py-3 bg-zinc-800 border border-zinc-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 text-white resize-none h-32"
                        placeholder="Add some context or notes..." name="details"></textarea>
                </div>

                <button type="submit"
                    class="px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-semibold rounded-lg shadow-lg">
                    Create Task
                </button>
            </form>
        </div>

        <hr class="border-zinc-800 mb-12">

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <% if(files.length > 0){ %>
                <% files.forEach(function(val){ %>
                    <div class="task-card flex flex-col justify-between p-6 rounded-xl">
                        <div>
                            <div class="flex items-start justify-between mb-4">
                                <h2 class="text-xl font-bold text-white truncate pr-4" title="<%= val %>">
                                    <%= val %>
                                </h2>
                                <span class="px-2 py-1 text-xs font-medium bg-zinc-800 text-zinc-400 rounded">Task</span>
                            </div>
                        </div>

                        <div class="flex items-center justify-between mt-6 pt-4 border-t border-zinc-800">
                            <a class="text-blue-400 hover:text-blue-300 font-medium text-sm" href="/files/<%= val %>">
                                View Details â†’
                            </a>
                            <a class="text-zinc-500 hover:text-zinc-300 text-sm flex items-center gap-1" href="/edit/<%= val %>">
                                Edit
                            </a>
                        </div>
                    </div>
                <% }) %>
            <% } else { %>
                <div class="col-span-full py-20 text-center">
                    <h3 class="text-zinc-400 text-lg font-medium animate-pulse">No tasks found!</h3>
                </div>
            <% } %>
        </div>
    </div>

</body>
<script src="/public/javascripts/script.js"></script>
</html>
